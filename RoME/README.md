
<!-- README.md is generated from README.Rmd. Please edit that file -->

# RoME

**Authors**: I. Bitetto, W. Zupa

COISPA Tecnologia & Ricerca, Stazione Sperimentale per lo Studio delle
Risorse del Mare <!-- badges: start --> <!-- badges: end -->

**RoME** package integrate a list of common quality checks on survey
data. The main function *RoME()* calls all the functions built in the
package in an ordered way to perform a complete quality check of TX data
available. The order of the checks in *RoME* was implemented in a
defined sequence to avoid cascade errors due to the correction of a
previous error. The function does not correct the data it self, but it
detects the errors, warning the user that there is the possibility of
one or more errors, specifying the type of the error and easing the data
correction. RoME stops if an error occurs; then the user has to correct
the error and run again the code to continue with the other checks. The
function can be used on a complete time series dataset, checking year
after year, until the end of the time series. After the checks of the
mandatory fields and the controlled vocabulary, that are carried out for
all the TX tables, the specific checks on each kind of TX table are
performed. Finally, *RoME* provides a list of cross checks aimed to
guarantee the consistency among the data tables. If parameter
*verbose=TRUE* returns a series of text output in console to let the
user to trace the state of the checks. All the output of the functions
are stored in the user defined working directory *wd* and in the
sub-directory there resident. In the Lofile subfolder are stored the
logfiles of each run of the function.

## Installation

You can install the released version of *RoME* package from
[CRAN](https://CRAN.R-project.org) with:

``` r
install.packages("RoME")
```

## References

Anonymus. 2017. MEDITS-Handbook. Version n. 9. MEDITS Working Group. 106
pp. [https://www.sibm.it/MEDITS 2011/principaledownload.htm](https://www.sibm.it/MEDITS%202011/principaledownload.htm)

## Use

``` r
 library(RoME)
#> Loading required package: timeDate
#> Loading required package: stringr
#> Loading required package: MEDITS
#> 
#> Attaching package: 'RoME'
#> The following objects are masked from 'package:MEDITS':
#> 
#>     TA, TB, TC
    wd <- tempdir()
    suffix=NA
    DataTA = data.frame(RoME::TA[RoME::TA$YEAR==2012 ,])
    DataTB = data.frame(RoME::TB[RoME::TB$YEAR==2012 ,])
    DataTC = data.frame(RoME::TC[RoME::TC$YEAR==2012 ,])
    DataTE = NA
    DataTL = NA
    RoME(DataTA, DataTB,DataTC,DataTE,DataTL, wd, suffix)
#> [1] Checking year  2012
#> [1] Check identical record TA in progress...
#> [1] Check identical record TA successfully completed!
#> [1] Check identical record TB in progress...
#> [1] Check identical record TB successfully completed!
#> [1] Check identical record TC in progress...
#> [1] Check identical record TC successfully completed!
#> [1] Check quasi-identical record in TA in progress...
#> [1] Check quasi-identical record in TA successfully completed!
#> [1] Check quasi-identical record in TB in progress...
#> [1] Check quasi-identical record in TB successfully completed!
#> [1] Check quasi-identical record in TC in progress...
#> [1] Check quasi-identical record in TC successfully completed!
#> [1] Check consistency of area TA, TB, TC, TE, TL in progress...
#> [1] Check consistency of area TA, TB, TC, TE, TL successfully completed!
#> [1] Check dictionary for field: VALIDITY in progress...
#> [1] Check dictionary for field: VALIDITY successfully completed!
#> [1] Check dictionary for field: COURSE in progress...
#> [1] Check dictionary for field: COURSE successfully completed!
#> [1] Check dictionary for field: CODEND_CLOSING in progress...
#> [1] Check dictionary for field: CODEND_CLOSING successfully completed!
#> [1] Check dictionary for field: PART_OF_THE_CODEND in progress...
#> [1] Check dictionary for field: PART_OF_THE_CODEND successfully completed!
#> [1] Check dictionary for field: GEOMETRICAL_PRECISION in progress...
#> [1] Check dictionary for field: GEOMETRICAL_PRECISION successfully completed!
#> [1] Check dictionary for field: GEAR in progress...
#> [1] Check dictionary for field: GEAR successfully completed!
#> [1] Check dictionary for field: RIGGING in progress...
#> [1] Check dictionary for field: RIGGING successfully completed!
#> [1] Check dictionary for field: DOORS in progress...
#> [1] Check dictionary for field: DOORS successfully completed!
#> [1] Check dictionary for field: SHOOTING_QUADRANT in progress...
#> [1] Check dictionary for field: SHOOTING_QUADRANT successfully completed!
#> [1] Check dictionary for field: HAULING_QUADRANT in progress...
#> [1] Check dictionary for field: HAULING_QUADRANT successfully completed!
#> [1] Check dictionary for field: MEASURING_SYSTEM in progress...
#> [1] Check dictionary for field: MEASURING_SYSTEM successfully completed!
#> [1] Check dictionary for field: CODEND_CLOSING in progress...
#> [1] Check dictionary for field: CODEND_CLOSING successfully completed!
#> [1] Check dictionary for field: PART_OF_THE_CODEND in progress...
#> [1] Check dictionary for field: PART_OF_THE_CODEND successfully completed!
#> [1] Check dictionary for field: CODEND_CLOSING in progress...
#> [1] Check dictionary for field: CODEND_CLOSING successfully completed!
#> [1] Check dictionary for field: PART_OF_THE_CODEND in progress...
#> [1] Check dictionary for field: PART_OF_THE_CODEND successfully completed!
#> [1] Check dictionary for field: SEX in progress...
#> [1] Check dictionary for field: SEX successfully completed!
#> [1] Check dictionary for field: LENGTH_CLASSES_CODE in progress...
#> [1] Check dictionary for field: LENGTH_CLASSES_CODE successfully completed!
#> [1] Check no empty fields TA in progress...
#> [1] Check no empty fields TA successfully completed!
#> [1] Check no empty fields TB in progress...
#> [1] Check no empty fields TB successfully completed!
#> [1] Check no empty fields TC in progress...
#> [1] Check no empty fields TC successfully completed!
#> [1] Check 0 fields TA in progress...
#> [1] Check 0 fields TA successfully completed!
#> [1] Check dm TA in progress...
#> [1] Check dm TA successfully completed!
#> [1] Check consistency between duration and time TA in progress...
#> [1] Check consistency between duration and time TA successfully completed!
#> [1] Check consistency between distance and duration of the haul TA in progress...
#> [1] Check consistency between distance and duration of the haul TA successfully completed!
#> [1] Check consistency of the hauls coordinates with the distance(difference not greater than 30%) in progress...
#> [1] Check consistency of the hauls coordinates with the distance(difference not greater than 30%) successfully completed!
#> [1] Check consistency of bridles length TA in progress...
#> [1] Check consistency of bridles length TA successfully completed!
#> [1] Check difference between start depth and end depth (not greater than 20%) in TA in progress...
#> [1] Check difference between start depth and end depth (not greater than 20%) in TA successfully completed!
#> [1] Check start depth and end depth in the same stratum TA in progress...
#> [1] Check start depth and end depth in the same stratum TA successfully completed!
#> [1] Check consistency of stratum code in TA in progress...
#> [1] Check consistency of stratum code in TA successfully completed!
#> [1] Check start quadrant and end quadrant TA in progress...
#> [1] Check start quadrant and end quadrant TA successfully completed!
#> [1] Check uniqueness of valid hauls TA in progress...
#> [1] Check uniqueness of valid hauls TA successfully completed!
#> [1] Visual check of the haul positions in progress...
#> [1] Visual check of the haul positions successfully completed!
#> [1] Relation between shooting depth e warp length and between warp length e wing opening in progress...
#> [1] Relation between shooting depth e warp length and between warp length e wing opening successfully completed!
#> [1] Check if the coordinates are in the Mediterranean Sea in progress...
#> [1] Check if the coordinates are in the Mediterranean Sea successfully completed!
#> [1] Check on temperature by haul in progress...
#> [1] Check on temperature by haul successfully completed!
#> [1] Check correctness of species codes TB in progress...
#> [1] Check correctness of species codes TB successfully completed!
#> [1] Check consistency of NB_TOTAL and number per sex TB in progress...
#> [1] Check consistency of NB_TOTAL and number per sex TB successfully completed!
#> [1] Check presence of NB_TOTAL and number per sex TB for species G1 in progress...
#> [1] Check presence of NB_TOTAL and number per sex TB for species G1 successfully completed!
#> [1] Check consistency between not null weight and not null total number in progress...
#> [1] Check consistency between not null weight and not null total number successfully completed!
#> [1] Check consistency of weight and number TB in progress...
#> [1] Check consistency of weight and number TB successfully completed!
#> [1] Check correctness of LENGTH_CLASSES_CODE TC in progress...
#> [1] Check correctness of LENGTH_CLASSES_CODE TC successfully completed!
#> [1] Check correctness of species codes TC in progress...
#> [1] Check correctness of species codes TC successfully completed!
#> [1] Check consistency of length classes TC in progress...
#> [1] Check consistency of length classes TC successfully completed!
#> [1] Check correctness of number per sex in TC in progress...
#> [1] Check correctness of number per sex in TC successfully completed!
#> [1] Check consistency of maturity stages TC in progress...
#> [1] Check consistency of maturity stages TC successfully completed!
#> [1] Check sub-sampling in progress...
#> [1] Check sub-sampling successfully completed!
#> [1] Check consistency of maturity stages TC by the comparison with the length of smallest mature individuals reported in bibliography in progress...
#> [1] Check consistency of maturity stages TC by the comparison with the length of smallest mature individuals reported in bibliography successfully completed!
#> [1] Check consistency of sex TC by means of spawning period in progress...
#> [1] Check consistency of sex TC by means of spawning period successfully completed!
#> [1] Check consistency of sex data TC by means of sex-inversion size in progress...
#> [1] Check consistency of sex data TC by means of sex-inversion size successfully completed!
#> [1] Check consistency of length distribution TC in progress...
#> [1] Check consistency of length distribution TC successfully completed!
#> [1] Check total weight in the haul in TC in progress...
#> [1] Check total weight in the haul in TC successfully completed!
#> [1] Check correctness of species codes TC in progress...
#> [1] Check correctness of species codes TC successfully completed!
#> [1] Check presence of lengths for G1 and G2 Medits species in TC in progress...
#> [1] Check presence of lengths for G1 and G2 Medits species in TC successfully completed!
#> [1] Check presence in TB of TA hauls in progress...
#> [1] Check presence in TB of TA hauls successfully completed!
#> [1] Check presence in TA of TB hauls in progress...
#> [1] Check presence in TA of TB hauls successfully completed!
#> [1] Check presence in TC of TB target species in progress...
#> [1] Check presence in TC of TB target species successfully completed!
#> [1] Check presence in TB of TC species in progress...
#> [1] Check presence in TB of TC species successfully completed!
#> [1] Check correctness of the number per sex in TB in case of sub-sampling in TC   in progress...
#> [1] Check correctness of the number per sex in TB in case of sub-sampling in TC   successfully completed!
#> [1] Check on date by haul TB in progress...
#> [1] Check on date by haul TB successfully completed!
#> [1] Check on date by haul TC in progress...
#> [1] Check on date by haul TC successfully completed!
#> [1] All the checks have been performed!
```
